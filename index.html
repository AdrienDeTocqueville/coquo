<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Coquo</title>
		
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link rel="stylesheet" href="theme.css">

		<!-- Firebase Compat SDK -->
		<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

		<!-- FirebaseUI -->
		<link rel="stylesheet"
		  href="https://www.gstatic.com/firebasejs/ui/6.0.2/firebase-ui-auth.css" />
		<script src="https://www.gstatic.com/firebasejs/ui/6.0.2/firebase-ui-auth.js"></script>
    </head>

    <body>
		<header class="center-text">
			<a><strong>COQVO</strong></a>
			<div id="right" class="header-list">
				<img id="profile-img" draggable="false" style="display: none" alt="Picture" height="32" width="32">
			</div>
		</header>

		<div style="display: none" id="firebaseui-auth-container"></div>
    </body>

	<script>
		const firebaseConfig = {
			apiKey: "AIzaSyAOsghOEPYUmr1L-y8iX0feFau79dcxfBQ",
			authDomain: "coquo-pat.firebaseapp.com",
			projectId: "coquo-pat",
			storageBucket: "coquo-pat.firebasestorage.app",
			messagingSenderId: "230128169014",
			appId: "1:230128169014:web:71be33fe9ee35c7e1aa897"
		};


		firebase.initializeApp(firebaseConfig);

		const auth = firebase.auth();
		const ui = new firebaseui.auth.AuthUI(auth);

		const uiConfig = {
			signInOptions: [
				firebase.auth.GoogleAuthProvider.PROVIDER_ID
			],
			callbacks: {
				signInSuccessWithAuthResult: function(authResult, redirectUrl) {
					console.log("User signed in:", authResult.user.displayName);
					return false; // Prevent redirect
				}
			},
			signInFlow: 'popup'
		};

		// Auth state listener
		auth.onAuthStateChanged(user => {
			if (user == null)
			{
				let signIn = document.querySelector("#firebaseui-auth-container");
				signIn.style.display = "block";

				ui.start('#firebaseui-auth-container', uiConfig);
			}
			else
			{
				let profilePic = document.querySelector("#profile-img");
				profilePic.src = user.photoURL;
				profilePic.style.display = "block";

				console.log("User signed in:", user.displayName);
				console.dir(user);
			}
		});

		const db = firebase.firestore();

	</script>

    
</html>